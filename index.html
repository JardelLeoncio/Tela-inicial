<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tela de Apresentação</title>
    <link rel="shortcut icon" href="icone/icons8-fábrica-16.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> 
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="header" id="header">
        <button onclick="abrirlateral()" class="btn_icon_header">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"          fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
            </svg>
        </button>
        <div class="logo_header">
            <img src="imagens/logo.png" class="img_logo_header" alt="logo-de-barra-de-pesquisa">
        </div>
        <div class="nagivation_header" id="nagivation_header">
            <button onclick="abrirlateral()" class="btn_icon_header">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
            </button>
            <a href="index.html" class="active">Home</a>
            <a href="#" class="active">Banco de Dados</a>
            <a href="#" class="active">Contato</a>
        </div>
    </div>
    <div class="titulo" tabindex="0" onclick="closeSidebar()">
        <h1>
            Calculo para Blend
        </h1>
    </div>
    <div class="grid">
        <div class="box" id="box" tabindex="0" onclick="closeSidebar()">
            <form action="index.html" method="POST">
                <fieldset>
                    <legend><b>Blend</b></legend>
                    <br>
                    <div class="inputBox">
                        <input type="text" name="FluxoCT" id="FluxoCT" class="inputEntrada" required>
                        <label for="FluxoCT" class="labelInput">Determine o Fluxo da CT</label>
                    </div>
                    <br>
                    <div class="inputBox">
                        <input type="text" name="Porcent_Esteril" id="Porcent_Esteril" class="inputEntrada" required>
                        <label for="Porcent_Esteril" class="labelInput">% Do Estéril</label>
                    </div>
                    <br>
                    <div class="inputBox">
                        <p>Qual Correia Transportadora:</p>
                        <input type="radio"  name="porcentagem" value="15" checked required><label for="70">CT-37 (Debulha)</label>
                        <br>
                        <input type="radio"  name="porcentagem" value="8" required><label for="30">CT-12 (Classificação)</label>
                        <br>
                        <input type="radio"  name="porcentagem" value="8" required><label for="30">CT-10 (Tratamento)</label>
                        <br>
                        <input type="radio"  name="porcentagem" value="8" required><label for="30">CT-60 (Tratamento)</label>
                    </div>
                    <br>
                    <div>
                        <button id="submit" type="button" onclick="produto.calcular()">Calcular</button>
                    </div> 
                </fieldset> 
                <div>
                    <table class="table">
                        <thead class="barra_titulo">
                            <tr>
                                <th class="center">#</th>
                                <th class="center">Fluxo Geral</th>
                                <th class="center">% Estéril</th>
                                <th class="center">Kg/h</th>
                                <th class="center">% Fértil</th>
                                <th class="center">Kg/h</th> 
                                <th class="center">açoês</th>
                                
                            </tr>
                        </thead>
                        <tbody id="tbody">
                        
                        </tbody>
                    </table>
                </div>          
            </form>
        </div>
    </div>
    
</body>
<script>
    
    var header = document.getElementById('header');
    var navigationHeader = document.getElementById('nagivation_header');
    var content = document.getElementById('content');
    var box = document.getElementById('box');
    var showSidebar = false;

    function abrirlateral()
    {
        showSidebar = !showSidebar
        if(showSidebar){
            navigationHeader.style.marginLeft = '-10vw';
            navigationHeader.style.animationName = 'showSidebar';
            box.style.filter = 'blur(2px)';
        }else{
            navigationHeader.style.marginLeft = '-100vw';
            navigationHeader.style.animationName = '';
            box.style.filter = '';
        }
    }
    function closeSidebar()
    {
        if(showSidebar){
            abrirlateral();
        }
    }

    window.addEventListener('resize', function(event){
        if(window.innerWidth > 768 && showSidebar){
            abrirlateral();
        }
    })

class Produto{

    constructor()
    {
        this.id = 1;
        this.arrayProdutos = [];
    }

    calcular()
    {
        let produto = this.lerDados();

        if(this.validaCampos(produto))
        {
            this.adicionar(produto);
        }
        this.listarTabela();
        this.limpar();
    }

    listarTabela()
    {
        let tbody = document.getElementById('tbody');
        tbody.innerText = '';

        for(let i = 0; i < this.arrayProdutos.length; i++ )
        {
            let tr = tbody.insertRow();

            let td_id = tr.insertCell();
            let td_FluxoCT = tr.insertCell();
            let td_Porcent_Esteril = tr.insertCell();
            let td_result_esteril = tr.insertCell();
            let td_result_porcent = tr.insertCell();
            let td_result_fertil = tr.insertCell();
            let td_acoes = tr.insertCell();
            

            td_id.innerText = this.arrayProdutos[i].id;
            td_FluxoCT.innerText = this.arrayProdutos[i].FluxoCT;
            td_Porcent_Esteril.innerText = this.arrayProdutos[i].Porcent_Esteril +"%";
            td_result_esteril.innerText = this.arrayProdutos[i].result_esteril;
            td_result_porcent.innerText = this.arrayProdutos[i].result_porcent +"%";
            td_result_fertil.innerText = this.arrayProdutos[i].result_fertil;

            td_id.classList.add('center');

            let imgDelete = document.createElement('img');
            imgDelete.src = 'imagens/delete.svg';
            imgDelete.setAttribute('onclick', "produto.deletar("+ this.arrayProdutos[i].id+")")

            td_acoes.appendChild(imgDelete);
            

            
        }
    }

    adicionar(produto)
    {
        this.arrayProdutos.push(produto);
        this.id++;
    }

    lerDados()
    {
        let produto = {}
    
        produto.id = this.id;
        produto.FluxoCT = document.getElementById('FluxoCT').value;
        produto.Porcent_Esteril = document.getElementById('Porcent_Esteril').value;
        produto.result_esteril = Number(produto.Porcent_Esteril) * Number(produto.FluxoCT) / 100;
        produto.result_porcent = 100 - produto.Porcent_Esteril;
        produto.result_fertil = Number(produto.result_porcent) * Number(produto.FluxoCT) / 100;
        produto.porcentagem = document.querySelector("input[name='porcentagem']:checked").value;
        

        return produto;
    }

    validaCampos(produto)
    {   
        let msg = '';
        if(produto.FluxoCT == '')
        {
            msg += '-Informe o Híbrido\n'
        }
        if(produto.Porcent_Esteril == '')
        {
            msg += '-Informe o Porcent_Esteril\n'
        }
        if(msg != '')
        {
            alert(msg);
            return false;
        }
        return true;
    }
    limpar(){
        document.getElementById('FluxoCT').value = '';
        document.getElementById('Porcent_Esteril').value = '';
        document.getElementById('volume').value = '';
        document.getElementById('fertilidade').value = '';
        document.querySelector("input[name='porcentagem']:checked").value = ! checked;
    }

    deletar(id){

        let tbody = document.getElementById('tbody');

        for(let i = 0; i < this.arrayProdutos.length; i++){
            if(this.arrayProdutos[i].id == id){
                this.arrayProdutos.splice(i, 1);
                tbody.deleteRow(i);
            }
        }
    }
}
    var produto = new Produto();
</script>
</html>